<div class="parser-container">  <mat-card>    <mat-card-header>      <mat-card-title>ProForma 2.0 Sequence Parser</mat-card-title>      <mat-card-subtitle>Parse and visualize protein/peptide sequences with modifications</mat-card-subtitle>    </mat-card-header>    <mat-card-content>      <div class="examples-section">        <h3 class="examples-title">Example Sequences:</h3>        <div class="example-controls">          <mat-form-field appearance="outline" style="width:100%">            <mat-label>Example Sequences</mat-label>            <mat-select [(ngModel)]="selectedExample" (selectionChange)="selectExample($event.value)">              <mat-option>-- Select an example --</mat-option>              @for (example of examples; track $index) {                <mat-option [value]="example">                  {{example}}                </mat-option>              }            </mat-select>          </mat-form-field>        </div>      </div>      <form [formGroup]="form">        <mat-form-field appearance="outline" class="sequence-field" style="width:100%">          <mat-label>Sequence</mat-label>          <textarea            matInput            formControlName="sequence"            placeholder="Enter or paste your sequence here"            rows="6" ></textarea>          <div class="sequence-actions">            @if (form.value.sequence) {              <button                matSuffix                mat-icon-button                aria-label="Clear"                (click)="clearSequence()">                <mat-icon>close</mat-icon>              </button>            }            <button mat-icon-button matTooltip="Copy sequence" aria-label="Copy" (click)="copySequence()">              <mat-icon>content_copy</mat-icon>            </button>          </div>          <mat-hint align="start">Sequence will be automatically parsed as you type</mat-hint>          <mat-hint align="end">{{form.value.sequence?.length || 0}} characters</mat-hint>        </mat-form-field>        @if (isProcessing) {          <div class="processing-indicator">            <mat-progress-spinner diameter="24" mode="indeterminate"></mat-progress-spinner>            <span>Processing...</span>          </div>        }      </form>      <div class="info-panel">        <mat-icon class="info-panel-icon">info</mat-icon>        <div class="info-panel-content">          <strong>Additional Interactive Features:</strong>          <ul>            <li>UniMod, PSI-MOD, GNO, XLMOD, and RESID entries will display detailed information when clicked.</li>            <li>Glycans using GNO notation will show graphical representation from GlyGen database.</li>          </ul>          <a href="https://github.com/HUPO-PSI/ProForma" target="_blank" class="documentation-link">            <mat-icon inline>description</mat-icon> ProForma 2.0 Documentation          </a>        </div>      </div>    </mat-card-content>  </mat-card>  @if (parsingError) {    <div class="parsing-error-container">      <mat-icon color="warn">error_outline</mat-icon>      <mat-error class="parsing-error-message">{{ parsingError }}</mat-error>    </div>  }  @if (parsedSequence && !isProcessing) {    <mat-card>      <mat-card-header>        <mat-card-title>Parsed Result</mat-card-title>      </mat-card-header>      <mat-card-content>        @if (!parsedSequence.isMultiChain) {          @if (parsedSequence.isChimeric) {            <div style="display: flex; flex-direction: column; gap: 10px">              <h5>Chimeric spectra</h5>              @for (pep of parsedSequence.peptidoforms; track $index) {                <app-parser-result [sequence]="pep"></app-parser-result>              }            </div>          } @else {            <app-parser-result [sequence]="parsedSequence"></app-parser-result>          }        } @else {          <div style="display: flex; flex-direction: column; gap: 10px">            <h5>Multi-chain/branched sequence</h5>            @for (chain of parsedSequence.chains; track $index) {              <app-parser-result [sequence]="chain"></app-parser-result>            }          </div>        }      </mat-card-content>    </mat-card>  }  <mat-card>    <mat-card-header>      <mat-card-title>Sequence Modification Pipe Legend</mat-card-title>    </mat-card-header>    <mat-card-content>      <div class="legend-container">        @for (type of pipeValueTypes; track $index) {          <div class="legend-item">            <div class="legend-indicator" [ngClass]="'pipe-type-' + type.toLowerCase()">              <div class="pipe-indicator"></div>            </div>            <div class="legend-label">{{formatLegendLabel(type)}}</div>          </div>        }      </div>    </mat-card-content>  </mat-card>  <mat-card>    <mat-card-header>      <mat-card-title>ProForma Specification Compliance</mat-card-title>      <mat-card-subtitle>Features supported by this parser implementation</mat-card-subtitle>    </mat-card-header>    <mat-card-content>      <div class="compliance-status">        <div class="compliance-level">          <div class="compliance-badge full">            <mat-icon>check_circle</mat-icon>            <span>Full Compliance</span>          </div>          <p>This parser implements all levels of the ProForma 2.0 specification</p>        </div>      </div>      <mat-accordion>        <mat-expansion-panel>          <mat-expansion-panel-header>            <mat-panel-title>              <div class="compliance-badge base">                <mat-icon>check_circle</mat-icon>                Base-ProForma Compliant              </div>            </mat-panel-title>          </mat-expansion-panel-header>          <ul class="feature-list">            <li>Amino acid sequences</li>            <li>Protein modifications using Unimod and PSI-MOD</li>            <li>Protein modifications using delta masses (without prefixes)</li>            <li>N-terminal, C-terminal and labile modifications</li>            <li>Ambiguity in modification position with localization scores</li>            <li>Ambiguity in amino acid sequence</li>            <li>INFO tag support</li>          </ul>        </mat-expansion-panel>        <mat-expansion-panel>          <mat-expansion-panel-header>            <mat-panel-title>              <div class="compliance-badge level2">                <mat-icon>check_circle</mat-icon>                Level 2-ProForma Compliant              </div>            </mat-panel-title>          </mat-expansion-panel-header>          <ul class="feature-list">            <li>Unusual amino acids (O and U)</li>            <li>Ambiguous amino acids (X, B, Z) and sequence tags of known mass</li>            <li>Protein modifications using delta masses with prefixes</li>            <li>Use of prefixes for Unimod (U:) and PSI-MOD (M:) names</li>            <li>Joint representation of experimental data and interpretation</li>          </ul>        </mat-expansion-panel>        <mat-expansion-panel>          <mat-expansion-panel-header>            <mat-panel-title>              <div class="compliance-badge topdown">                <mat-icon>check_circle</mat-icon>                Top-Down Extensions              </div>            </mat-panel-title>          </mat-expansion-panel-header>          <ul class="feature-list">            <li>Additional CV/ontologies: RESID (R:)</li>            <li>Chemical formulas</li>          </ul>        </mat-expansion-panel>        <mat-expansion-panel>          <mat-expansion-panel-header>            <mat-panel-title>              <div class="compliance-badge crosslink">                <mat-icon>check_circle</mat-icon>                Cross-Linking Extensions              </div>            </mat-panel-title>          </mat-expansion-panel-header>          <ul class="feature-list">            <li>Cross-linked peptides using XL-MOD CV/ontology (X:)</li>          </ul>        </mat-expansion-panel>        <mat-expansion-panel>          <mat-expansion-panel-header>            <mat-panel-title>              <div class="compliance-badge glycan">                <mat-icon>check_circle</mat-icon>                Glycan Extensions              </div>            </mat-panel-title>          </mat-expansion-panel-header>          <ul class="feature-list">            <li>Additional CV/ontologies: GNO (G:)</li>            <li>Glycan composition</li>            <li>Chemical formulas</li>            <li>Graphical representations via GlyGen</li>          </ul>        </mat-expansion-panel>        <mat-expansion-panel>          <mat-expansion-panel-header>            <mat-panel-title>              <div class="compliance-badge spectral">                <mat-icon>check_circle</mat-icon>                Spectral Support              </div>            </mat-panel-title>          </mat-expansion-panel-header>          <ul class="feature-list">            <li>Charge and chimeric spectra</li>            <li>Global modifications</li>          </ul>        </mat-expansion-panel>      </mat-accordion>    </mat-card-content>  </mat-card></div>